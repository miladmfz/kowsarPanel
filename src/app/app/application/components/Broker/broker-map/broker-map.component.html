<!-- <div class="container mt-4">
<form class="row g-3 mb-4" (ngSubmit)="getTrackerData()" #trackerForm="ngForm">
  <div class="col-md-6 col-lg-4" dir="ltr">
    <label for="startDate" class="form-label">ุชุงุฑุฎ ุดุฑูุน</label>
    <ng-persian-datepicker [dateFormat]="'YYYY/MM/DD HH:mm:ss'" [timeEnable]="true" [uiTheme]="customTheme"
      [uiHideOnOutsideClick]="false" [uiHideAfterSelectDate]="true">
      <input class="form-control" id="startDate" type="text" [formControl]="startDate_form" />
    </ng-persian-datepicker>
  </div>

  <div class="col-md-6 col-lg-4" dir="ltr">
    <label for="endDate" class="form-label">ุชุงุฑุฎ ูพุงุงู</label>
    <ng-persian-datepicker [dateFormat]="'YYYY/MM/DD HH:mm:ss'" [timeEnable]="true" [uiTheme]="customTheme"
      [uiHideOnOutsideClick]="false" [uiHideAfterSelectDate]="true">
      <input class="form-control" id="endDate" type="text" [formControl]="endDate_form" />
    </ng-persian-datepicker>
  </div>

  <div class="col-12">
    <button type="submit" class="btn btn-primary w-100">ุฏุฑุงูุช ุงุทูุงุนุงุช</button>
  </div>
</form>
<div id="customer-stats"
  style="position: absolute; top: 10px; right: 10px; background: white; border-radius: 8px; box-shadow: 0 0 6px rgba(0,0,0,0.2); ">
</div>

<div *ngIf="noDataMessage" class="alert alert-warning">
  {{ noDataMessage }}
</div>

<div class="container mt-4">
  <div class="card shadow-sm">
    <div id="map" style="width: 100%; height: 80vh; border-radius: 10px;"></div>

  </div>
</div>

</div>


-->
<div class="container mt-4 position-relative">



  <form class="row g-3 align-items-center mb-4" [formGroup]="filterForm" (ngSubmit)="getTrackerData()" novalidate>


    <div class="col-md-6 col-lg-4" dir="ltr">
      <label for="day" class="form-label fw-semibold mb-1">ุชุงุฑุฎ</label>
      <div class="d-flex align-items-center gap-2">
        <!-- ููุด ุฑูุฒ ูุจู -->
        <button type="button" class="btn btn-outline-secondary px-2" (click)="changeDate(-1)" placement="top"
          data-toggle="tooltip" title="ุฑูุฒ ูุจู">
          <i class="fas fa-arrow-left"></i>
        </button>

        <!-- ุชููู -->
        <ng-persian-datepicker [dateFormat]="'YYYY/MM/DD'" [uiTheme]="customTheme" [uiHideOnOutsideClick]="false"
          [uiHideAfterSelectDate]="true">
          <input id="day" type="text" class="form-control" formControlName="day" placeholder="ุงูุชุฎุงุจ ุชุงุฑุฎ"
            autocomplete="off" />
          </ng-persian-datepicker>

          <!-- ููุด ุฑูุฒ ุจุนุฏ -->
          <button type="button" class="btn btn-outline-secondary px-2" (click)="changeDate(1)" data-toggle="tooltip"
            title="ุฑูุฒ ุจุนุฏ" placement="top">
            <i class="fas fa-arrow-right"></i>
          </button>

        </div>
      </div>


      <!-- ุณุงุนุช ุดุฑูุน -->
      <div class="col-md-3 col-lg-2" dir="ltr">
        <label for="starttime" class="form-label fw-semibold mb-1">ุงุฒ ุณุงุนุช</label>
        <input id="starttime" type="time" step="60" lang="fa" class="form-control" formControlName="starttime" />
      </div>

      <!-- ุณุงุนุช ูพุงุงู -->
      <div class="col-md-3 col-lg-2" dir="ltr">
        <label for="endtime" class="form-label fw-semibold mb-1">ุชุง ุณุงุนุช</label>
        <input id="endtime" type="time" step="60" lang="fa" class="form-control" formControlName="endtime" />
      </div>

      <!-- ุฏฺฉูู ู ุขูุงุฑ ูุดุชุฑุงู ... (ุฏููุงู ููุงู ุจุฎุด ูุจู ุดูุง) -->
      <!-- ูฺ ุชุบุฑ ุฏุฑ ุงู ูุณูุช ูุฏุงุฏูโุงู -->
    </form>


    <!-- ุฏฺฉูู ู ุขูุงุฑ ูุดุชุฑุงู ุฏุฑ ฺฉ ุฑุฏู -->
    <div class="col-12">
      <div class="d-flex align-items-center justify-content-between flex-wrap gap-3">

        <!-- ุฏฺฉูู -->
        <button type="submit" (click)="getTrackerData()" class="btn btn-primary px-4 py-2 flex-grow-1 flex-md-grow-0">
          ุฏุฑุงูุช ุงุทูุงุนุงุช
        </button>

        <!-- ุขูุงุฑ ูุดุชุฑุงู -->
        @if (customerStats) {
          <div id="customer-stats"
            class="bg-white border rounded shadow-sm px-3 py-2 flex-grow-1 flex-md-grow-0"
            style="font-family: Vazirmatn, sans-serif; font-size: 14px; line-height: 1.6; max-width: 300px;">
            <strong class="d-block mb-2">๐ฅ ุชุนุฏุงุฏ ฺฉู ูุดุชุฑุงู: {{customerStats.total}}</strong>
            <div>๐ข ูุดุชุฑุงู ูุฒุฏฺฉ (ุฎุฑุฏ ฺฉุฑุฏู): {{customerStats.nearGreen}}</div>
            <div>๐ก ูุฒุฏฺฉ (ุจุฏูู ุฎุฑุฏ ูู ุฏุงุฑุง ุชูุถุญ): {{customerStats.nearYellow}}</div>
            <div>๐ต ุฏูุฑ ูู ุฏุงุฑุง ูุถุนุช: {{customerStats.farBlue}}</div>
            <div>๐ด ุจุณุงุฑ ุฏูุฑ (ุจุด ุงุฒ ดฐฐูุชุฑ): {{customerStats.veryFarRed}}</div>
          </div>
        }

      </div>
    </div>






    <!-- ููุงุด ูพุงู ุฎุทุง ุฏุฑ ุตูุฑุช ูุฌูุฏ -->
    @if (noDataMessage) {
      <div class="alert alert-warning mt-3">
        {{ noDataMessage }}
      </div>
    }

    <!-- ููุงุด ููุดู -->
    <div class="container mt-4 px-0">
      <div class="card shadow-sm">
        <div id="map" style="width: 100%; height: 80vh; border-radius: 10px;" role="region" aria-label="ููุดู ูุดุชุฑุงู">
        </div>
      </div>
    </div>
  </div>